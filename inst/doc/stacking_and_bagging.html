<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Author" />

<meta name="date" content="2019-02-12" />

<title>Showcase: Bagging and Stacking</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">Showcase: Bagging and Stacking</h1>
<h4 class="author"><em>Author</em></h4>
<h4 class="date"><em>2019-02-12</em></h4>



<p>Leveraging the different operations available to connect <code>PipeOps</code> to very powerfull graphs. This vignette introduces two such well-known graph structures, that allow us to enhance single learners to more powerfull combinations.</p>
<p>Before we go into details, we split the task into train and test indices.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">  <span class="kw">library</span>(mlr3)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="kw">library</span>(mlr3pipelines)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  task =<span class="st"> </span>mlr_tasks<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;iris&quot;</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  train.idx =<span class="st"> </span><span class="kw">sample</span>(<span class="kw">seq_len</span>(task<span class="op">$</span>nrow), <span class="dv">120</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  test.idx =<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">seq_len</span>(task<span class="op">$</span>nrow), train.idx)</a></code></pre></div>
<div id="bagging" class="section level2">
<h2>Bagging</h2>
<p>We first examine Bagging introduced by Breimann (1994). The basic idea is to create multiple predictors and then aggregate those to a single, more powerfull predictor. &gt; “… multiple versions are formed &gt; by making bootstrap replicates of the learning set &gt; and using these as new learning sets” (Breimann 1994)</p>
<p>Bagging then aggregates a set of predictors by averaging (regression) or majority vote (classification). The idea behind bagging is, that a set of weak, but different predictors can be combined in order to arrive at a single, better predictor.</p>
<p>We can achieve this by downsampling our data before training a learner, repeating this for say <span class="math inline">\(10\)</span> times and then performing a majority vote on the predictions.</p>
<p>First, we create a simple pipeline, that uses <code>PipeOpSubsample</code> before a <code>PipeOpLearner</code> is trained:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">  single_pred =<span class="st"> </span>PipeOpSubsample<span class="op">$</span><span class="kw">new</span>() <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">    </span>PipeOpLearner<span class="op">$</span><span class="kw">new</span>(mlr_learners<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;classif.rpart&quot;</span>))</a></code></pre></div>
<p>We can now repeat this <span class="math inline">\(10\)</span> times using <code>greplicate</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">  pred_set =<span class="st"> </span><span class="kw">greplicate</span>(single_pred, 10L)   </a></code></pre></div>
<p>In order to visually inspect the resulting graph, we can plot it:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">  pred_set<span class="op">$</span><span class="kw">plot</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAtAAAAEgCAIAAAAST9NPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO3deZwcdZ3/8c+3qu+Znp77ykxmct+ZJARzn4ACJiCwgsgpgj9O82NZlVPBlUUwi67o+lMXEdGEcIVDhBAgxpwQIAhJJiSTZMhJ5r56+qz6/v6oMAxz4Qq1YPb1fPBHd9Xn+5lvVw/p99TVSmstAAAAbjI+7QkAAIDjH4EDAAC4jsABAABcR+AAAACuI3AAAADXETgAAIDrCBwAAMB1BA4AAOA6AgcAAHAdgQMAALiOwAEAAFxH4AAAAK4jcAAAANcROAAAgOsIHAAAwHUEDgAA4DoCBwAAcB2BAwAAuI7AAQAAXEfgAAAAriNwAAAA1xE4AACA6wgcAADAdQQOAADgOgIHAABwHYEDAAC4jsABAABcR+AAAACuI3AAAADXETgAAIDrCBwAAMB1BA4AAOA6AgcAAHAdgQMAALiOwAEAAFxH4AAAAK4jcAAAANcROAAAgOsIHAAAwHUEDgAA4DoCBwAAcB2BAwAAuI7AAQAAXEfgAAAAriNwAAAA1xE4AACA6wgcAADAdQQOAADgOgIHAABwHYEDAAC4jsABAABcR+AAAACuI3AAAADXETgAAIDrCBwAAMB1BA4AAOA6AgcAAHAdgQMAALiOwAEAAFxH4AAAAK4jcAAAANcROAAAgOsIHAAAwHUEDgAA4DoCBwAAcB2BAwAAuI7AAQAAXEfgAAAAriNwAAAA1xE4AACA6wgcAADAdQQOAADgOgIHAABwHYEDAAC4jsABAABcR+AAAACuI3AAAADXETgAAIDrCBzAZ8veva07dza5VzDA2ubm+Asv1H6cgp07mx58cPsn3r9riVPQzyv7YO2+fa1a91HQ1BT/wQ82/fCHrzz22K5oNDVAhwGW/HcdORL9OMOB44bn054AgA/8+tdvfeMbL/zoR/NGj851o2CAtevXH7rqqtX797e1tSX/joJNmw5/61trt2w5kkzavdfu39920UXPbdhwUGuxbX333XNHj/5c94IDB9ovuuhPGzYcsixba7nnng86dM25oSF2ySV/qq1ts6wber+0K69c/ctf/tV5fO65o1asWNyj4PHHd1188XOGIU1N13m9H/ytFY+ny8t/2dAQ61qilBw6dFVJSYbzkuvrO7dsueiee14tKcnUWtfUtNxzz9yCglD35u+9F126dMuwYdm7dzeXlYWvv36qUrJp0+G77nqlvr5z06YLuirb25M33bSupCQjEPAcPRq988453ScDHMf4RQc+Q664YmJxcYZ7BQOsnT170MUXjwsGPX9HQUdHqqIiq7AwVFycaRiqx9poNHXttS99//szr7tuSiBgisj69Ye6F1iWvvPOzb/+9efvvHNOVpZfRPbubek957KyTBER6WPfRUdHqrk5/s1vTsnNDWzZcuGvfvX5HgWHD3d885svz5tXlpHh7fEBv2LFO7feOmPnzsv27bvippumRSK+OXPKSkoyul6yiJx77tOLFg27+eZpt9wyfezYvG99a233DqmUffLJj558csVVV01aunT+k0/W/Nu/bXa2icdj9NjXctllz/v95i23TL/hhqmWpa+4YlUf2xo4HrGHA/hsMc2eH9h/X8Hq1atfeumljo6OoUOHfv3rX49EIt3XJhKJBx54YMeOHV6vd+bMmWeffbZSyvkkdgpqa2sfeuihQ4cOFRUVnXvuuePGjROR7gXPP//8mjVrotHo8OHDv/71r5eWhgsLQ+r9qcVisQceeKC6utrv95vmpO9975QTTijaurUuHPal03rXrqY9e/b84Q9/OHz4cHFx8ec/f9Zdd83JyQn4fEYgYLa1id9vPvvss2vXro3FYiNGjDAMbzxu3Xff1tmzy2prW0Wks7Pz/vvv37VrVyAQmDt3bnV1USDgsW3t8RhTpxaLyK5du5YvX3748OHS0tKvfvWrN9ywLRj0nHJKxRtvHHVm+PTTT69bty4ejxcWjvyXf7k8GAyKSGFhKJWyzz9/TNfGdF7yO+80V1c3fuELlc7C5uZ49w3+7LN7t29vmDu3TEQMQ51//ujvfOcv3/zmlNLSzMLC0OHDHV2V1dWNjz2267XXLnKefuUro6dN+/2tt84YPjx74PcUOA4o3eehTgCfqB/9aItpKtM07rhjY2PjtcuXV1944bPf//7sW2+d/uSTNVdfvTo/P3TppeNM0/jnf15z220zXnyxdsOGw6WlmY89dsbRo51XX71aa/W5zxWZprly5a7vfW+mU5CR4bvqqqo1aw5UVzdGIr7hw3M2bjxs23ZeXqyhIaBE+X3xkP+9pvYK0zQGD84qKwuvW3dQKTGMhGX5RcRjprzm0XhqkFJG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wtdfP9U5/aNrm2zadEFXcXt78qab1pWUZAQCnqNHo3feOcfr5U84oF/87wEct5yjIV3HRGpqWn77223dC0zT7AoEztqOjlRFRZbHY3TtWuj6PH777YYzz1y5ZMmUNWvO+/KXR33vexueeqpRKdV1xOSdd5ovvvhPd9015+DBK3/2s5PvuGPjzp3JHv2dx7W1rTffvC6V0tItD9XUtPzyl3/durVuy5YLnf9uummEYRhdR0xqalp+8pPXZ8xYdvrpQ7/73Rl+v8c0za7AVFPTct11L91664ydOy/bt++Kffuu+K//mjd6tL+iIqerYMGChxctGnbzzdNuuWX62LF5999/tL5e/+53O5yCVMo++eRHTz654qqrJi1dOv/JJ2v+7d82i0j3bdLdZZc97/ebt9wy/YYbplqWvuKKVR/r3QKOd+btt9/+ac8BwCfvkUceue+++1atWvXuu++OHz++rU0WLFgxalTu7NllItLe3r506dLf/OY3r7zySiqVKigYdtJJj44albtw4eBw2LdmzYF9+xp27/798uXLq6uri4qKTDNn1qxlp5029KqrJhUXZ5xySsXDD7++Zcvu7dsfOnDgwIQJE1pb9fz5K848c/g554xUSkpLPT/+8etHjz61detay7IKCoYtXPiI89Pb2pL33LNl0iTv6tUHd+78RXV1dWlpqVKRBQtWNDZ2RiKBCRMKqqoK1q175te//sWLL7548ODBqqqq5mZrwYIVf/1rnWGoFSsWt7S03H333Q8++OBrr71m23Ze3pCFCx858cTiW2+dnp8fzM4O7Nmz/TvfebKtbev+/RsHDRqkdXjBghVHjkSrqgqmTy+1bftnP/vj+vU1f/xja2trzRlnTAgEAs88s+e++9741a8+7/WaSql4PH377RuvvXZyOOxztsl770Uvv3yis3mrqxuvueal++47qbQ0U0RycwPXXffSBReMzc3t95QX4H85pXuEdgCfGU8/vef3v98xfHh2Mmk9+OD2yy6bsGtX08iRuYlE+okndqfTesiQyLx5Zcmk9atfvTV6dG4yabW3p6ZMKXj22W3pZCIvnDAMbdnxoy2DTNOjlDIMGTMmf9y44MMP7zSUUVH4XkcsVN+W7fMl4vHMvLxgIpH+4heHrV+/69ChtMe0s4LRUKD1UGOJYXhFjFDI9Ho9c+eWPv/89mTCE/SnIqH2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" /><!-- --></p>
<p>Afterwards we need to aggregate the 10 pipelines to form a single model:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">  bagging =<span class="st"> </span>pred_set <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">    </span>PipeOpMajorityVote<span class="op">$</span><span class="kw">new</span>(<span class="dt">innum =</span> 10L)</a></code></pre></div>
<p>and plot again to see what happens:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">  bagging<span class="op">$</span><span class="kw">plot</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>This pipeline can again be used in conjunction with <code>GraphLearner</code> in order for Bagging to be used like a [mlr3::Learner].</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">  baglrn =<span class="st"> </span>GraphLearner<span class="op">$</span><span class="kw">new</span>(bagging)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">  e =<span class="st"> </span>Experiment<span class="op">$</span><span class="kw">new</span>(<span class="dt">task =</span> task, <span class="dt">learner =</span> baglrn)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  e<span class="op">$</span><span class="kw">train</span>(train.idx)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; INFO [mlr3] Training learner 'subsample_1.subsample_2.subsample_3.subsample_4.subsample_5.subsample_6.subsample_7.subsample_8.subsample_9.subsample_10.rpart_1.rpart_2.rpart_3.rpart_4.rpart_5.rpart_6.rpart_7.rpart_8.rpart_9.rpart_10.majorityvote' on task 'iris' ...</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  e<span class="op">$</span><span class="kw">predict</span>(test.idx)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; INFO [mlr3] Predicting with model of learner 'subsample_1.subsample_2.subsample_3.subsample_4.subsample_5.subsample_6.subsample_7.subsample_8.subsample_9.subsample_10.rpart_1.rpart_2.rpart_3.rpart_4.rpart_5.rpart_6.rpart_7.rpart_8.rpart_9.rpart_10.majorityvote' on task 'iris' ...</span></a></code></pre></div>
<p>In conjunction with different <code>Backends</code>, this can be a very powerful tool, as in cases, where the data does not fully fit in memory, we can easily just obtain a fraction of the data for each learner from a <code>DataBaseBackend</code> and then aggregate predictions from all learners.</p>
</div>
<div id="stacking" class="section level2">
<h2>Stacking</h2>
<p>Stacking is another technique that can improve model performance. The basic idea behind stacking is, that using predictions from one model as features of a subsequent model can possibly improve performance.</p>
<p>A very simple possibility would be to train a decision tree and use the predictions from this model in conjunction with the original features in order to train an additional model on top. The basic idea behind this is, that patterns a model detected in the data can be used by a higher level model, and thus result in a better performance.</p>
<p>In order to limit overfitting, we additionally do not predict on the original predictions of the learner, but instead on out-of-bag predictions. This is automatically done by <code>PipeOpLearnerCV</code>.</p>
<p>We first create a level 0 learner, which is used to extract a lower level prediction. We additionally <code>clone()</code> the learner object to obtain a copy of the learner, and set a custom id for the <code>PipeOp</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">  lrn =<span class="st"> </span>mlr_learners<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;classif.rpart&quot;</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  lrn_<span class="dv">0</span> =<span class="st"> </span>PipeOpLearnerCV<span class="op">$</span><span class="kw">new</span>(lrn<span class="op">$</span><span class="kw">clone</span>())</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  lrn_<span class="dv">0</span><span class="op">$</span>id =<span class="st"> &quot;rpart_cv&quot;</span></a></code></pre></div>
<p>Additionally, we use a <code>PipeOpNULL</code> in parallel to the level 0 learner, in order to send the unchanged Task to the next level.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">  level_<span class="dv">0</span> =<span class="st"> </span><span class="kw">gunion</span>(<span class="kw">list</span>(lrn_<span class="dv">0</span>, PipeOpNULL<span class="op">$</span><span class="kw">new</span>()))</a></code></pre></div>
<p>Afterwards, we want to concatenate the predictions from <code>PipeOpLearnerCV</code> and the original Task using <code>PipeOpFeatureUnion</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">  combined =<span class="st"> </span>level_<span class="dv">0</span> <span class="op">%&gt;&gt;%</span><span class="st"> </span>PipeOpFeatureUnion<span class="op">$</span><span class="kw">new</span>(<span class="dv">2</span>)</a></code></pre></div>
<p>We can now train another learner on top of the combined features.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">  stack =<span class="st"> </span>combined <span class="op">%&gt;&gt;%</span><span class="st"> </span>PipeOpLearner<span class="op">$</span><span class="kw">new</span>(lrn<span class="op">$</span><span class="kw">clone</span>())</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  stack<span class="op">$</span><span class="kw">plot</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">  stacklrn =<span class="st"> </span>GraphLearner<span class="op">$</span><span class="kw">new</span>(stack)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">  e =<span class="st"> </span>Experiment<span class="op">$</span><span class="kw">new</span>(<span class="dt">task =</span> task, <span class="dt">learner =</span> stacklrn)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  e<span class="op">$</span><span class="kw">train</span>(train.idx)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; INFO [mlr3] Training learner 'rpart_cv.null.featureunion.rpart' on task 'iris' ...</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; INFO [mlr3] Running learner 'rpart' on task 'iris' (iteration 1/3)'</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; INFO [mlr3] Running learner 'rpart' on task 'iris' (iteration 2/3)'</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; INFO [mlr3] Running learner 'rpart' on task 'iris' (iteration 3/3)'</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">  e<span class="op">$</span><span class="kw">predict</span>(test.idx)</a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; INFO [mlr3] Predicting with model of learner 'rpart_cv.null.featureunion.rpart' on task 'iris' ...</span></a></code></pre></div>
<p>In this vignette, we only showcase a very simple usecase for stacking. In many real-world applications, stacking is done for multiple levels and on multiple representations of the dataset. On a lower level, different preprocessing methods can for example be defined in conjunction with several learners. On a higher level, we can then combine those predictions in order to form a very powerfull model.</p>
</div>
<div id="multilevel-stacking" class="section level2">
<h2>Multilevel Stacking</h2>
<p>In order to showcase the power of <code>mlr3pipelines</code>, we will quickly introduce a more complicated stacking example.</p>
<p>In this case, we train a <strong>glmnet</strong> and 2 different <em>rpart</em> models (some transform its inputs using <code>PipeOpPCA</code>) on our task in the level 0 and concatenate them with the original features (via <code>PipeOpNull</code>). This is then passed on to level 1, where we copy the concatenated features <span class="math inline">\(3\)</span> times and put this task into a <strong>rpart</strong> and a <strong>glmnet</strong> model. Additionally, we also keep a version of the level 0 output (via <code>PipeOpNull</code>) and pass this on to level 2. In level 2 we simply concatenate all level 1 outputs and train a final decision tree.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">  <span class="kw">library</span>(mlr3learners)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  rprt =<span class="st"> </span>mlr_learners<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;classif.rpart&quot;</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  rprt<span class="op">$</span>predict_type =<span class="st"> &quot;prob&quot;</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">  glmn =<span class="st"> </span>mlr_learners<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;classif.glmnet&quot;</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">  glmn<span class="op">$</span>predict_type =<span class="st"> &quot;prob&quot;</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"></a>
<a class="sourceLine" id="cb13-7" data-line-number="7">  <span class="co">#  Create Learner CV Operators</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">  lrn_<span class="dv">0</span> =<span class="st"> </span>PipeOpLearnerCV<span class="op">$</span><span class="kw">new</span>(rprt, <span class="dt">id =</span> <span class="st">&quot;rpart_cv_1&quot;</span>)</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">  lrn_<span class="dv">0</span><span class="op">$</span>values<span class="op">$</span>maxdepth =<span class="st"> </span>5L</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">  lrn_<span class="dv">1</span> =<span class="st"> </span>PipeOpPCA<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;pca1&quot;</span>) <span class="op">%&gt;&gt;%</span><span class="st"> </span>PipeOpLearnerCV<span class="op">$</span><span class="kw">new</span>(rprt, <span class="dt">id =</span> <span class="st">&quot;rpart_cv_2&quot;</span>)</a>
<a class="sourceLine" id="cb13-11" data-line-number="11">  lrn_<span class="dv">1</span><span class="op">$</span>values<span class="op">$</span>maxdepth =<span class="st"> </span>1L</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">  lrn_<span class="dv">2</span> =<span class="st"> </span>PipeOpPCA<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;pca2&quot;</span>) <span class="op">%&gt;&gt;%</span><span class="st"> </span>PipeOpLearnerCV<span class="op">$</span><span class="kw">new</span>(glmn)</a>
<a class="sourceLine" id="cb13-13" data-line-number="13"></a>
<a class="sourceLine" id="cb13-14" data-line-number="14">  <span class="co"># Union them with a PipeOpNULL to keep original features</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15">  level_<span class="dv">0</span> =<span class="st"> </span><span class="kw">gunion</span>(<span class="kw">list</span>(lrn_<span class="dv">0</span>, lrn_<span class="dv">1</span>,lrn_<span class="dv">2</span>, PipeOpNULL<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;NULL1&quot;</span>)))</a>
<a class="sourceLine" id="cb13-16" data-line-number="16"></a>
<a class="sourceLine" id="cb13-17" data-line-number="17">  <span class="co"># Cbind the output 3 times, train 2 learners but also keep level</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18">  <span class="co"># 0 predictions</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19">  level_<span class="dv">1</span> =<span class="st"> </span>level_<span class="dv">0</span> <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="st">    </span>PipeOpFeatureUnion<span class="op">$</span><span class="kw">new</span>(<span class="dv">4</span>) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="st">    </span>PipeOpCopy<span class="op">$</span><span class="kw">new</span>(<span class="dv">3</span>) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="st">    </span><span class="kw">gunion</span>(<span class="kw">list</span>(</a>
<a class="sourceLine" id="cb13-23" data-line-number="23">      PipeOpLearnerCV<span class="op">$</span><span class="kw">new</span>(rprt, <span class="dt">id =</span> <span class="st">&quot;rpart_cv_l1&quot;</span>),</a>
<a class="sourceLine" id="cb13-24" data-line-number="24">      PipeOpLearnerCV<span class="op">$</span><span class="kw">new</span>(glmn, <span class="dt">id =</span> <span class="st">&quot;glmnt_cv_l1&quot;</span>),</a>
<a class="sourceLine" id="cb13-25" data-line-number="25">      PipeOpNULL<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;NULL_l1&quot;</span>)</a>
<a class="sourceLine" id="cb13-26" data-line-number="26">    ))</a>
<a class="sourceLine" id="cb13-27" data-line-number="27"></a>
<a class="sourceLine" id="cb13-28" data-line-number="28">  <span class="co"># Cbind predicitions, train a final learner.</span></a>
<a class="sourceLine" id="cb13-29" data-line-number="29">  level_<span class="dv">2</span> =<span class="st"> </span>level_<span class="dv">1</span> <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb13-30" data-line-number="30"><span class="st">    </span>PipeOpFeatureUnion<span class="op">$</span><span class="kw">new</span>(<span class="dv">3</span>, <span class="dt">id =</span> <span class="st">&quot;u2&quot;</span>) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb13-31" data-line-number="31"><span class="st">    </span>PipeOpLearner<span class="op">$</span><span class="kw">new</span>(rprt,</a>
<a class="sourceLine" id="cb13-32" data-line-number="32">      <span class="dt">id =</span> <span class="st">&quot;rpart_l2&quot;</span>)</a>
<a class="sourceLine" id="cb13-33" data-line-number="33"></a>
<a class="sourceLine" id="cb13-34" data-line-number="34">  <span class="co"># Plot the resulting graph</span></a>
<a class="sourceLine" id="cb13-35" data-line-number="35">  level_<span class="dv">2</span><span class="op">$</span><span class="kw">plot</span>()</a>
<a class="sourceLine" id="cb13-36" data-line-number="36"></a>
<a class="sourceLine" id="cb13-37" data-line-number="37">  e =<span class="st"> </span>Experiment<span class="op">$</span><span class="kw">new</span>(</a>
<a class="sourceLine" id="cb13-38" data-line-number="38">    <span class="dt">task =</span> mlr_tasks<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;iris&quot;</span>),</a>
<a class="sourceLine" id="cb13-39" data-line-number="39">    <span class="dt">learner =</span> GraphLearner<span class="op">$</span><span class="kw">new</span>(level_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb13-40" data-line-number="40">    )</a>
<a class="sourceLine" id="cb13-41" data-line-number="41">  e<span class="op">$</span><span class="kw">train</span>(train.idx)</a>
<a class="sourceLine" id="cb13-42" data-line-number="42">  e<span class="op">$</span><span class="kw">predict</span>(test.idx) </a>
<a class="sourceLine" id="cb13-43" data-line-number="43">  e<span class="op">$</span><span class="kw">score</span>()</a>
<a class="sourceLine" id="cb13-44" data-line-number="44">  e<span class="op">$</span>performance</a></code></pre></div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
