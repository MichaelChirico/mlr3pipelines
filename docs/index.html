<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Preprocessing Operators and Pipelines for mlr3 • mlr3pipelines</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<script src="extra.js"></script><meta property="og:title" content="Preprocessing Operators and Pipelines for mlr3">
<meta property="og:description" content="Pipelines for mlr3. Work in progress.">
<meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="articles/a_simple_pipeline.html">A simple pipeline</a>
    </li>
    <li>
      <a href="articles/basic_concepts.html">Showcase: Basic Concepts: PipeOp and Graph</a>
    </li>
    <li>
      <a href="articles/branching.html">Showcase: Branching</a>
    </li>
    <li>
      <a href="articles/stacking_and_bagging.html">Showcase: Bagging and Stacking</a>
    </li>
    <li>
      <a href="articles/create_a_custom_pipeop.html">Custom PipeOps</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="news/index.html">News</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr3pipelines">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<div id="mlr3pipelines" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mlr3pipelines" class="anchor"></a>mlr3pipelines <img src="reference/figures/logo.png" align="right">
</h1></div>

<div id="what-is-mlr3pipelines" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-mlr3pipelines" class="anchor"></a>What is <code>mlr3pipelines</code>?</h2>
<p><strong><code>mlr3pipelines</code></strong> is a <a href="https://en.wikipedia.org/wiki/Dataflow_programming">dataflow programming</a> toolkit for machine learning in R utilising the <strong><a href="https://github.com/mlr-org/mlr3">mlr3</a></strong> package. Machine learning workflows can be written as directed “Graphs” that represent data flows between preprocessing, model fitting, and ensemble learning units in an expressive and intuitive language. Using methods from the <strong><a href="https://github.com/mlr-org/mlr3tuning">mlr3tuning</a></strong> package, it is even possible to simultaneously optimize parameters of multiple processing units.</p>
<p>In principle, <em>mlr3pipelines</em> is about defining singular data and model manipulation steps as “PipeOps”:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">pca =<span class="st"> </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"pca"</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3">filter =<span class="st"> </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"filter"</span>,</a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">filter =</span> mlr3featsel<span class="op">::</span>FilterVariance<span class="op">$</span><span class="kw">new</span>(),</a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="dt">param_vals =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">filter.frac =</span> <span class="fl">0.5</span>))</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">learner_po =<span class="st">  </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"learner"</span>,</a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="dt">learner =</span> mlr_learners<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"classif.rpart"</span>))</a></code></pre></div>
<p>These pipeops can then be combined together to define machine learning pipelines:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">graph =<span class="st"> </span>pca <span class="op">%&gt;&gt;%</span><span class="st"> </span>filter <span class="op">%&gt;&gt;%</span><span class="st"> </span>learner_po</a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(graph)</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; Graph with 3 PipeOps:</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt;              ID         State       sccssors      prdcssors</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;             pca &lt;&lt;UNTRAINED&gt;&gt; FilterVariance               </span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;  FilterVariance &lt;&lt;UNTRAINED&gt;&gt;  classif.rpart            pca</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;   classif.rpart &lt;&lt;UNTRAINED&gt;&gt;                FilterVariance</span></a></code></pre></div>
<p>This example pipeline can be used for training and prediction:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">task =<span class="st"> </span>mlr_tasks<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"iris"</span>)</a>
<a class="sourceLine" id="cb3-2" title="2">holdout =<span class="st"> </span>mlr_resamplings<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"holdout"</span>)<span class="op">$</span><span class="kw">instantiate</span>(task)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">graph<span class="op">$</span><span class="kw">train</span>(task<span class="op">$</span><span class="kw">clone</span>()<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(holdout<span class="op">$</span><span class="kw">train_set</span>(<span class="dv">1</span>)))</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; $classif.rpart.output</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb3-7" title="7"></a>
<a class="sourceLine" id="cb3-8" title="8">graph<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(task<span class="op">$</span><span class="kw">clone</span>()<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(holdout<span class="op">$</span><span class="kw">test_set</span>(<span class="dv">1</span>)))</a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; $classif.rpart.output</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; &lt;PredictionClassif&gt; for 50 observations:</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt;     row_id  response     truth</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt;  1:      3    setosa    setosa</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;  2:      5    setosa    setosa</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt;  3:      9    setosa    setosa</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt; ---                           </span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt; 48:    142 virginica virginica</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt; 49:    145 virginica virginica</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt; 50:    148 virginica virginica</span></a></code></pre></div>
<p>Resampling (and even tuning, see below) is possible using the <code>GraphLearner</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">glrn =<span class="st"> </span>GraphLearner<span class="op">$</span><span class="kw">new</span>(graph)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">resample</span>(task, glrn, mlr_resamplings<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"cv"</span>))</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; &lt;ResampleResult&gt; of learner 'iris' on task 'pca.FilterVariance.classif.rpart' with 10 iterations</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt;     Measure Min. 1st Qu.  Median Mean 3rd Qu.   Max.      Sd</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;  classif.ce    0       0 0.06667 0.06 0.06667 0.2667 0.07981</span></a></code></pre></div>
</div>
<div id="feature-overview" class="section level2">
<h2 class="hasAnchor">
<a href="#feature-overview" class="anchor"></a>Feature Overview</h2>
<p>Single computational steps can be represented as so-called <strong>PipeOps</strong>, which can then be connected with directed edges in a <strong>Graph</strong>. The scope of <em>mlr3pipelines</em> is still growing; currently supported features are:</p>
<ul>
<li>Simple data manipulation and preprocessing operations, e.g. PCA, feature filtering</li>
<li>Task subsampling for speed and outcome class imbalance handling</li>
<li>
<em>mlr3</em> <em>Learner</em> operations for prediction and stacking</li>
<li>Simultaneous path branching (data going both ways)</li>
<li>Alternative path branching (data going one specific way, controlled by hyperparameters)</li>
<li>Ensemble methods and aggregation of predictions</li>
</ul>
<!--
* Simple preprocessing operations: *PipeOpScale*, *PipeOpPCA*.
* Feature filtering: *PipeOpFilter*.
* Data feature type conversion: *PipeOpEncode*.
* Undersampling / subsampling for speed and outcome class imbalance handling: *PipeOpSubsample*.
* *mlr3* *Learner* as operation in a *Graph*, both returning a "*Prediction*" (*PipeOpLearner*) and an added data feature for super learning (*PipeOpLearnerCV*).
* Simple ensemble methods on Predictions: *PipeOpMajorityVote*, *PipeOpModelAvg*.
* Simultaneous alternative paths with same input data: *PipeOpCopy*.
* Combination of data from alternative paths: *PipeOpFeatureUnion*.
* Optional alternative paths, chosen by *Graph* hyperparameter: *PipeOpBranch*, *PipeOpUnbranch*.
--><p>Graphs can be collected into a “<em>GraphLearner</em>” object that behave like <em>mlr3</em> Learners, and can therefore be used both for model fitting and prediction, and can even be used in hyperparameter optimization.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>To show the power of <em>mlr3pipelines</em>, the following example shows how to build a <em>Graph</em> that chooses between multiple preprocessing methods, fits both a classification tree (from the <em>rpart</em> package) and a linear model (using R’s “lm()” function), and performs “stacking”—using the predictions of these two models as covariates for a third machine learning method—with penalised linear regression (using the <em>glmnet</em> package). (The example was chosen to show the expressiveness of the <em>Graph</em> language, not to perform particularly well). For a detailed explanation of all steps involved see the <a href="documentation">documentation</a>.</p>
<p>The graph is built using single processing units—“PipeOps”—that are concatenated using the piping operator <code>%&gt;&gt;%</code>. Note the difference from the <em><a href="https://github.com/tidyverse/magrittr">magrittr</a></em> package’s operator <code>%&gt;%</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"paradox"</span>)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"mlr3"</span>)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"mlr3pipelines"</span>)</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"mlr3learners"</span>)</a>
<a class="sourceLine" id="cb5-5" title="5"></a>
<a class="sourceLine" id="cb5-6" title="6">graph =</a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">  </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"branch"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"null"</span>, <span class="st">"pca"</span>, <span class="st">"scale"</span>)) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">  </span><span class="kw"><a href="reference/gunion.html">gunion</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb5-9" title="9">      mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"null"</span>, <span class="dt">id =</span> <span class="st">"null1"</span>),</a>
<a class="sourceLine" id="cb5-10" title="10">      mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"pca"</span>),</a>
<a class="sourceLine" id="cb5-11" title="11">      mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"scale"</span>)</a>
<a class="sourceLine" id="cb5-12" title="12">  )) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="st">  </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"unbranch"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"null"</span>, <span class="st">"pca"</span>, <span class="st">"scale"</span>)) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="st">  </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"copy"</span>, <span class="dv">3</span>) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="st">  </span><span class="kw"><a href="reference/gunion.html">gunion</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb5-16" title="16">      mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"null"</span>, <span class="dt">id =</span> <span class="st">"null2"</span>),</a>
<a class="sourceLine" id="cb5-17" title="17">      mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"learner_cv"</span>, mlr_learners<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"regr.rpart"</span>)),</a>
<a class="sourceLine" id="cb5-18" title="18">      mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"learner_cv"</span>, mlr_learners<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"regr.lm"</span>))</a>
<a class="sourceLine" id="cb5-19" title="19">  )) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="st">  </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"featureunion"</span>, <span class="dv">3</span>) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="st">  </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"encode"</span>, <span class="dt">param_vals =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">method =</span> <span class="st">"treatment"</span>)) <span class="op">%&gt;&gt;%</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="st">  </span>mlr_pipeops<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"learner"</span>, mlr_learners<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"regr.glmnet"</span>))</a></code></pre></div>
<p>The topology of this graph can most easily be seen using the <code>Graph</code>’s <code>$plot</code> method:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">graph<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>()</a></code></pre></div>
<p><img src="index_files/figure-html/graphplot-1.png" width="700"></p>
<p>The graph can itself be used to perform model fitting and prediction, but in our example we want to perform parameter tuning first, using the <em><a href="https://github.com/mlr-org/mlr3tuning">mlr3tuning</a></em> package. For this we wrap the <em>Graph</em> in a <em>GraphLearner</em>, which behaves mostly like a <em>mlr3</em> “Learner” object. For simplicity, we decide only on a few parameters we want to tune: the preprocessing to perform (<em>branch.selection</em>), and the maximum tree depth (<em>regr.rpart.regr.rpart.maxdepth</em>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">learner =<span class="st"> </span>GraphLearner<span class="op">$</span><span class="kw">new</span>(graph, <span class="dt">task_type =</span> <span class="st">"regr"</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3">ps =<span class="st"> </span>ParamSet<span class="op">$</span><span class="kw">new</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb7-4" title="4">  ParamFct<span class="op">$</span><span class="kw">new</span>(<span class="st">"branch.selection"</span>, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"pca"</span>, <span class="st">"scale"</span>, <span class="st">"null"</span>)),</a>
<a class="sourceLine" id="cb7-5" title="5">  ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="st">"regr.rpart.regr.rpart.maxdepth"</span>, <span class="dt">lower =</span> <span class="dv">1</span>, <span class="dt">upper =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb7-6" title="6">))</a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8">task =<span class="st"> </span>mlr_tasks<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"bh"</span>)</a>
<a class="sourceLine" id="cb7-9" title="9">task<span class="op">$</span><span class="kw">select</span>(task<span class="op">$</span>feature_types[type <span class="op">!=</span><span class="st"> "factor"</span>, id])</a>
<a class="sourceLine" id="cb7-10" title="10"></a>
<a class="sourceLine" id="cb7-11" title="11">resampling =<span class="st"> </span>mlr_resamplings<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"cv"</span>, <span class="dt">param_vals =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">folds =</span> <span class="dv">3</span>))</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"mlr3tuning"</span>)</a>
<a class="sourceLine" id="cb8-2" title="2">ff =<span class="st"> </span>FitnessFunction<span class="op">$</span><span class="kw">new</span>(task, learner, resampling, ps)</a>
<a class="sourceLine" id="cb8-3" title="3">tuner =<span class="st"> </span>TunerGridSearch<span class="op">$</span><span class="kw">new</span>(ff, TerminatorEvaluations<span class="op">$</span><span class="kw">new</span>(<span class="dv">1</span>), <span class="dt">resolution =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5">tuner<span class="op">$</span><span class="kw">tune</span>()</a>
<a class="sourceLine" id="cb8-6" title="6"></a>
<a class="sourceLine" id="cb8-7" title="7">tuner<span class="op">$</span><span class="kw">tune_result</span>()<span class="op">$</span>values[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(ps<span class="op">$</span>params)]</a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; $branch.selection</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt; [1] "null"</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt; $regr.rpart.regr.rpart.maxdepth</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt; [1] 5</span></a></code></pre></div>
<p>This would tell us that the “null” preprocessing branch with <em>rpart</em> <em>maxdepth</em> = performs well; although the usage of only few small resampling folds makes the result very stochastic.</p>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<p>The easiest way to get started is reading some of the vignettes that are shipped with the package, which can also be viewed online:</p>
<ul>
<li><a href="https://mlr-org.github.io/mlr3pipelines/articles/introduction.html">Quick Introduction</a></li>
<li><a href="https://mlr-org.github.io/mlr3pipelines/articles/basic_concepts.html">Basic Concepts</a></li>
<li><a href="https://mlr-org.github.io/mlr3pipelines/articles/a_simple_pipeline.html">Linear Preprocessing Pipelines</a></li>
<li><a href="https://mlr-org.github.io/mlr3pipelines/articles/branching.html">Alternative Path Branching</a></li>
<li><a href="https://mlr-org.github.io/mlr3pipelines/articles/stacking_and_bagging.html">Ensemble Methods</a></li>
<li><a href="https://mlr-org.github.io/mlr3pipelines/articles/create_a_custom_pipeop.html">Custom <code>PipeOp</code>s</a></li>
</ul>
</div>
<div id="bugs-questions-feedback" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-questions-feedback" class="anchor"></a>Bugs, Questions, Feedback</h2>
<p><em>mlr3pipelines</em> is a free and open source software project that encourages participation and feedback. If you have any issues, questions, suggestions or feedback, please do not hesitate to open an “issue” about it on the GitHub page!</p>
<p>In case of problems / bugs, it is often helpful if you provide a “minimum working example” that showcases the behaviour (but don’t worry about this if the bug is obvious).</p>
<p>Please understand that the ressources of the project are limited: response may sometimes be delayed by a few days, and some feature suggestions may be rejected if they are deemed too tangential to the vision behind the project.</p>
</div>
<div id="similar-projects" class="section level2">
<h2 class="hasAnchor">
<a href="#similar-projects" class="anchor"></a>Similar Projects</h2>
<p>A predecessor to this package is the <a href="https://github.com/mlr-org/mlrCPO"><em>mlrCPO</em>-package</a>, which works with <em>mlr</em> 2.x. Other packages that provide, to varying degree, some preprocessing functionality or machine learning domain specific language, are the <em><a href="https://github.com/topepo/caret">caret</a></em> package and the related <em><a href="https://tidymodels.github.io/recipes/">recipes</a></em> project, and the <em><a href="https://github.com/tidyverse/dplyr">dplyr</a></em> package.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/mlr-org/mlr3pipelines">https://​github.com/​mlr-org/​mlr3pipelines</a>
</li>
<li>Report a bug at <br><a href="https://github.com/mlr-org/mlr3pipelines/issues">https://​github.com/​mlr-org/​mlr3pipelines/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Martin Binder <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/mlr-org/mlr3pipelines"><img src="https://travis-ci.org/mlr-org/mlr3pipelines.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/mlr-org/mlr3pipelines"><img src="https://ci.appveyor.com/api/projects/status/github/mlr-org/mlr3pipelines?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/mlr-org/mlr3pipelines"><img src="https://codecov.io/github/mlr-org/mlr3pipelines/branch/master/graphs/badge.svg" alt="Coverage"></a></li>
</ul>
</div>
</div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Martin Binder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   

  </body>
</html>
